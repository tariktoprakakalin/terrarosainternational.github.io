<!DOCTYPE html>
<html lang="tr">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NDSLG54H');</script>
  <!-- End Google Tag Manager -->

  <script src="https://web.cmp.usercentrics.eu/modules/autoblocker.js"></script>
  <script id="usercentrics-cmp" src="https://web.cmp.usercentrics.eu/ui/loader.js" data-settings-id="uRzMeo-GwCge-z" async></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TerraRosa International – Global Emtia Tedarik ve Ticaret Ağı</title>
  <meta name="description" content="Enerji, tarım ve endüstriyel hammaddelerde ürün odaklı global tedarik ve ticaret ağı. Doğrulanmış tedarikçiler ve gerçek talep için TerraRosa International.">
  <meta name="robots" content="index, follow">

  <link rel="alternate" href="https://terrarosainternational.com/index.html" hreflang="tr" />
  <link rel="alternate" href="https://terrarosainternational.com/en.html" hreflang="en" />

  <meta property="og:title" content="TerraRosa International – Global Emtia Tedarik ve Ticaret Ağı">
  <meta property="og:description" content="Ürün odaklı, prosedür filtresi güçlü bağımsız ticaret ağı. Enerji, tarım ve endüstriyel hammaddeler.">
  <meta property="og:url" content="https://terrarosainternational.com/">
  <meta property="og:image" content="https://terrarosainternational.com/logo.png">
  <meta property="og:type" content="website">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="TerraRosa International">
  <meta name="twitter:description" content="Global emtia akışını ürün odaklı yöneten bağımsız ticaret ağı.">
  <meta name="twitter:image" content="https://terrarosainternational.com/logo.png">

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NDSLG54H"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <header class="tr-header">
    <div class="tr-container tr-nav">
      <div class="tr-logo">
        <img src="logo.png" alt="TerraRosa International" />
      </div>
      <nav class="tr-menu">
        <a href="#about">Hakkımızda</a>
        <a href="#services">Hizmetler</a>
        <a href="#products">Ürünler</a>
        <a href="#process">Çalışma Modeli</a>
        <a href="#contact">Talep Formu</a>
        <a href="en.html" class="tr-lang">EN</a>
        <button id="theme-toggle" class="tr-theme-toggle" type="button">☀︎</button>
      </nav>
    </div>

    <section class="tr-hero">
      <div class="tr-container tr-hero-inner">
        <div class="tr-hero-text">
          <h1>Global emtia akışını ürün odaklı yönetiyoruz.</h1>
          <p>
            TerraRosa International, enerji, tarım ve endüstriyel hammaddelerde
            <strong>gerçek talep</strong> ile <strong>doğrulanmış arzı</strong> eşleştiren
            bağımsız bir ticaret ağıdır.
          </p>
          <div class="tr-hero-actions">
            <a href="#contact" class="tr-btn primary">Talep / LOI Gönder</a>
            <a href="#products" class="tr-btn ghost">Mevcut Ürün Grupları</a>
          </div>
          <p class="tr-hero-note">
            Not: Ürün uygunluğu <strong>önceden rezerve edilmiş satışlara</strong> göre
            dinamiktir. Her talep ayrı değerlendirilir.
          </p>
        </div>
      </div>
    </section>
  </header>

  <main>
    <!-- AI ÖN GÖRÜŞME -->
    <section id="ai-desk" class="tr-section tr-section-alt">
      <div class="tr-container">
        <h2>TerraRosa AI – Ön Görüşme Masası</h2>
        <p class="tr-lead">
          Türkçe, English or any language – kısaca ne aradığınızı yazın.
          AI, ürün, miktar, teslim noktası, ödeme yapısı ve rolünüzü
          (alıcı / satıcı / broker) netleştirmeye yardımcı olur. Bu bir
          fiyat teklifi veya bağlayıcı sözleşme değildir; ilk teknik tarama olarak düşünün.
        </p>

        <div class="tr-grid-2">
          <div>
            <div class="tr-card">
              <form id="tr-chat-form">
                <div class="tr-field">
                  <label for="tr-chat-input">Kısaca talebinizi yazın</label>
                  <input
                    id="tr-chat-input"
                    type="text"
                    name="ai_message"
                    placeholder="Örn: EN590, 10.000MT, Fas teslim, aylık, DLC ödemeli..."
                    required
                  />
                </div>
                <button type="submit" class="tr-btn primary full">
                  Gönder
                </button>
              </form>
              <div id="tr-chat-status" class="tr-chat-status" style="font-size: 12px; color: #999; margin-top: 6px;"></div>
              <div id="tr-chat-reply" class="tr-chat-reply" style="font-size: 14px; margin-top: 10px; white-space: pre-wrap;"></div>
            </div>
          </div>

          <div>
            <div class="tr-card">
              <h3>Bu ne işe yarar?</h3>
              <ul>
                <li>Talebinizi teknik dilde toparlamaya yardımcı olur.</li>
                <li>Hangi bilgilerin eksik olduğunu gösterir.</li>
                <li>İsterseniz AI çıktısını formdaki <strong>Ek notlar</strong> alanına kopyalayabilirsiniz.</li>
                <li>Dilinizi otomatik algılar ve aynı dilde cevap vermeye çalışır.</li>
              </ul>
              <p class="tr-note">
                Önemli: AI yanıtları yalnızca ön değerlendirme amaçlıdır.
                Her ciddi talep yine insan tarafından, operasyonel gerçeklik ve risk çerçevesinde incelenir.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- HAKKIMIZDA -->
    <section id="about" class="tr-section">
      <div class="tr-container">
        <h2>Biz kimiz?</h2>
        <p class="tr-lead">
          Biz şirketlere değil, ürüne odaklanan bir ticaret istihbarat ve tedarik ağıyız.
          Amacımız; doğru zamanda, doğru miktarda ve doğru yapıda emtiayı,
          karşılıklı güvene dayalı prosedürlerle alıcıyla buluşturmak.
        </p>
        <div class="tr-grid-3">
          <div class="tr-card">
            <h3>Ürün odaklı yaklaşım</h3>
            <p>
              Önceliğimiz; hangi firmanın sattığından çok, ürünün teknik özellikleri,
              lojistik hattı ve finansal doğrulanabilirliğidir.
            </p>
          </div>
          <div class="tr-card">
            <h3>Bağımsız ağ</h3>
            <p>
              Rafineriler, üreticiler, paketleme tesisleri, lojistik ve nihai alıcılar
              arasında, tarafsız bir eşleştirme mekanizması kuruyoruz.
            </p>
          </div>
          <div class="tr-card">
            <h3>Dinamik piyasa</h3>
            <p>
              Bugün mevcut olan ürün yarın tükenebilir. Bu nedenle
              sabit “price sheet” yerine, <strong>LOI &amp; talep bazlı</strong>
              çalışma modeli kullanıyoruz.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- HİZMETLER -->
    <section id="services" class="tr-section tr-section-alt">
      <div class="tr-container">
        <h2>Ne sunuyoruz?</h2>
        <div class="tr-grid-3">
          <div class="tr-card">
            <h3>Global Tedarik Eşleştirme</h3>
            <p>
              Jet yakıtı, motorin, tarımsal ürünler ve endüstriyel hammaddelerde
              doğrulanmış üretici ve rafinerilerle çalışma imkânı.
            </p>
          </div>
          <div class="tr-card">
            <h3>Prosedür &amp; Risk Filtreleme</h3>
            <p>
              Uluslararası ticarette sahte prosedür ve gerçekçi olmayan teklifleri
              erken aşamada filtreleyerek, operasyonel olarak uygulanabilir süreçlere odaklanırız.
            </p>
          </div>
          <div class="tr-card">
            <h3>Stratejik Danışmanlık</h3>
            <p>
              Büyük hacimli alıcılar için; tedarik stratejisi, kontrat yapısı,
              teslim şekilleri ve ödeme enstrümanları konusunda yönlendirme.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- ÜRÜNLER -->
    <section id="products" class="tr-section">
      <div class="tr-container">
        <h2>Ürün grupları</h2>
        <p class="tr-lead">
          Ürün uygunluğu dinamiktir. Aşağıdaki gruplar, sık çalıştığımız kalemleri
          temsil eder. Mevcut durumu öğrenmek için lütfen LOI / talep formu gönderin.
        </p>

        <div class="tr-grid-3">
          <div class="tr-card">
            <h3>Enerji &amp; Yakıt</h3>
            <ul>
              <li>Jet A1</li>
              <li>EN590 (10ppm)</li>
              <li>Diğer distilat ürünler (talep üzerine)</li>
            </ul>
          </div>
          <div class="tr-card">
            <h3>Tarımsal Ürünler</h3>
            <ul>
              <li>GMO / Non-GMO Mısır</li>
              <li>Basmati pirinç ve diğer pirinç türleri</li>
              <li>Bakliyat (mercimek vb.)</li>
              <li>Ayçiçek yağı (özel durumlarda)</li>
            </ul>
          </div>
          <div class="tr-card">
            <h3>Gübre &amp; Endüstriyel</h3>
            <ul>
              <li>Üre, NPK ve diğer gübre türleri</li>
              <li>Kereste / ahşap ürünleri</li>
              <li>Şeker ve diğer işlenmiş gıda girdileri</li>
              <li>Dondurulmuş deniz ürünleri (belli rotalarda)</li>
            </ul>
          </div>
        </div>

        <p class="tr-note">
          Not: Spesifik ürün ve spesifik orijin/liman kombinasyonları için
          lütfen talep formunda detay verin.
        </p>
      </div>
    </section>

    <!-- ÇALIŞMA MODELİ -->
    <section id="process" class="tr-section tr-section-alt">
      <div class="tr-container">
        <h2>Çalışma modelimiz</h2>
        <div class="tr-grid-2">
          <div>
            <ol class="tr-step-list">
              <li><strong>Talep &amp; Profil</strong><br/>Alıcının ürün, miktar, hedef liman, zamanlama ve banka profili netleştirilir.</li>
              <li><strong>Doğrulanabilir Prosedür</strong><br/>Sadece operasyonel olarak uygulanabilir, bankacılık açısından mantıklı süreçler üzerinde çalışırız.</li>
              <li><strong>Ürün &amp; Tedarik Eşleştirme</strong><br/>Mevcut portföyümüzdeki üretici, rafineri veya tedarik ağlarıyla eşleştirme yapılır.</li>
              <li><strong>Doküman &amp; Operasyon</strong><br/>SPA, prosedür, inceleme ve lojistik planı, ilgili tarafların uyumu ile ilerler.</li>
            </ol>
          </div>
          <div>
            <p class="tr-lead">
              Her işlem; zamanlama, itibar ve risk dengesine göre değerlendirilir.
              “Tamamen risksiz ticaret” yoktur, ancak <strong>gereksiz risk</strong> almak zorunlu değildir.
            </p>
            <p>
              TerraRosa, özellikle prosedürleri gerçek operasyonla uyumlu olmayan teklifleri
              erken aşamada filtreleyerek, hem alıcının hem satıcının vaktini korumayı amaçlar.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- İLETİŞİM / FORM -->
    <section id="contact" class="tr-section">
      <div class="tr-container">
        <h2>Talep / LOI formu</h2>
        <p class="tr-lead">
          Lütfen mümkün olduğunca net bilgi iletin. Form, ilk değerlendirme için kullanılır;
          detaylı doküman alışverişi daha sonra yapılır.
        </p>

        <div class="tr-grid-2">
          <form class="tr-form">
            <div class="tr-field">
              <label for="company">Şirket adı</label>
              <input type="text" id="company" name="company" required />
            </div>

            <div class="tr-field">
              <label for="country">Ülke</label>
              <input type="text" id="country" name="country" required />
            </div>

            <div class="tr-field">
              <label for="email">Kurumsal e-posta</label>
              <input type="email" id="email" name="email" required placeholder="name@company.com" />
            </div>

            <div class="tr-field">
              <label for="product">Talep edilen ürün</label>
              <input type="text" id="product" name="product" placeholder="Örn: Jet A1, EN590, GMO Mısır, Üre..." required />
            </div>

            <div class="tr-field">
              <label for="volume">Miktar &amp; periyot</label>
              <input type="text" id="volume" name="volume" placeholder="Örn: 10,000 MT x 12 ay" />
            </div>

            <div class="tr-field">
              <label for="port">Hedef liman / teslim noktası</label>
              <input type="text" id="port" name="port" />
            </div>

            <div class="tr-field">
              <label for="bank">Banka profili (kısaca)</label>
              <input type="text" id="bank" name="bank" placeholder="Örn: Top 50 EU bank, bölgesel banka, vb." />
            </div>

            <div class="tr-field">
              <label for="message">Ek notlar</label>
              <textarea id="message" name="message" rows="4"></textarea>
            </div>

            <button type="submit" class="tr-btn primary full">Gönder</button>
          </form>

          <div class="tr-contact-info">
            <h3>Doğrudan iletişim</h3>
            <p>
              Genel sorular için:<br/>
              <a href="mailto:satis@terrarosainternational.com">satis@terrarosainternational.com</a>
            </p>
            <p>
              Lütfen spam niteliğinde toplu teklif veya gerçekçi olmayan prosedürler göndermeyin.
              Her ciddi talep teknik ve operasyonel çerçevede incelenir.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="tr-footer">
    <div class="tr-container">
      <span>© <span id="year"></span> TerraRosa International. All rights reserved.</span>
    </div>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>
  </footer>

  <!-- Tema + Form JS -->
  <script>
    // ==== TEMA SİSTEMİ ====
    function applyTheme(theme) {
      document.body.classList.remove('theme-light', 'theme-dark');
      document.body.classList.add('theme-' + theme);
      const btn = document.getElementById('theme-toggle');
      if (btn) {
        btn.textContent = theme === 'dark' ? '☀︎' : '☾';
        btn.setAttribute('aria-label', theme === 'dark'
          ? 'Açık temaya geç'
          : 'Koyu temaya geç');
      }
      try {
        localStorage.setItem('terraTheme', theme);
      } catch (e) {}
    }

    function initTheme() {
      let theme = 'dark';
      try {
        const stored = localStorage.getItem('terraTheme');
        if (stored === 'light' || stored === 'dark') {
          theme = stored;
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
          theme = 'light';
        }
      } catch (e) {}
      applyTheme(theme);
    }

    document.addEventListener('DOMContentLoaded', function () {
      // Tema ilk yükleme
      initTheme();

      const themeBtn = document.getElementById('theme-toggle');
      if (themeBtn) {
        themeBtn.addEventListener('click', function () {
          const isDark = document.body.classList.contains('theme-dark') ||
                         !document.body.classList.contains('theme-light');
          applyTheme(isDark ? 'light' : 'dark');
        });
      }

      // ==== FORM + GOOGLE SHEETS ====
      const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyiG3S1XCYsZkFEILnxgFqAF12ABUEBfvTH0VxngPFoFq3J9latmScC6WbpJEoqbJ5d/exec';

      const blockedEmailDomains = [
        'gmail.com', 'gmail.com.tr',
        'yahoo.com', 'yahoo.com.tr',
        'hotmail.com', 'hotmail.com.tr',
        'outlook.com', 'outlook.com.tr',
        'live.com', 'live.com.tr',
        'icloud.com',
        'yandex.com', 'yandex.ru', 'yandex.com.tr',
        'proton.me', 'protonmail.com',
        'mail.com', 'gmx.com'
      ];

      function isCorporateEmail(email) {
        if (!email) return false;
        const atIndex = email.lastIndexOf('@');
        if (atIndex === -1) return false;
        const domain = email.slice(atIndex + 1).toLowerCase().trim();
        return !blockedEmailDomains.includes(domain);
      }

      const forms = document.querySelectorAll('form.tr-form');

      forms.forEach(function (form) {
        const lang = document.documentElement.lang === 'tr' ? 'TR' : 'EN';

        form.addEventListener('submit', async function (e) {
          e.preventDefault();

          const company = form.querySelector('[name="company"]')?.value.trim();
          const country = form.querySelector('[name="country"]')?.value.trim();
          const email = form.querySelector('[name="email"]')?.value.trim();
          const product = form.querySelector('[name="product"]')?.value.trim();
          const volume = form.querySelector('[name="volume"]')?.value.trim();
          const port = form.querySelector('[name="port"]')?.value.trim();
          const bank = form.querySelector('[name="bank"]')?.value.trim();
          const message = form.querySelector('[name="message"]')?.value.trim();

          if (!isCorporateEmail(email)) {
            if (lang === 'TR') {
              alert('Lütfen kurumsal bir e-posta adresi kullanın (gmail, hotmail vb. kişisel adresler kabul edilmiyor).');
            } else {
              alert('Please use a corporate email address (personal emails like gmail, hotmail etc. are not accepted).');
            }
            return;
          }

          const payload = new URLSearchParams({
            language: lang,
            company: company || '',
            country: country || '',
            email: email || '',
            product: product || '',
            volume: volume || '',
            port: port || '',
            bank: bank || '',
            message: message || ''
          });

          try {
            await fetch(GOOGLE_SCRIPT_URL, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
              },
              body: payload.toString()
            });

            form.reset();
            if (lang === 'TR') {
              alert('Talebiniz alındı. Uygunluk durumuna göre sizinle iletişime geçilecektir.');
            } else {
              alert('Your inquiry has been received. We will contact you based on availability.');
            }
          } catch (err) {
            console.error(err);
            if (lang === 'TR') {
              alert('Bir hata oluştu. Lütfen daha sonra tekrar deneyin veya direkt e-posta ile ulaşın: satis@terrarosainternational.com');
            } else {
              alert('An error occurred. Please try again later or contact us directly: satis@terrarosainternational.com');
            }
          }
        });
      });
    });
  </script>

  <!-- TerraRosa AI – frontend entegrasyonu -->
  <script>
  (function () {
    const form = document.getElementById("tr-chat-form");
    const input = document.getElementById("tr-chat-input");
    const statusEl = document.getElementById("tr-chat-status");
    const replyEl = document.getElementById("tr-chat-reply");

    // Bu array sadece bu browser sekmesinde yaşıyor
    const history = [];

    if (!form || !input || !statusEl || !replyEl) return;

    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      const text = (input.value || "").trim();
      if (!text) return;

      // Kullanıcının mesajını önce history'ye ekle
      history.push({ role: "user", content: text });

      statusEl.textContent = "AI düşünüyor...";
      replyEl.textContent = "";
      input.disabled = true;

      try {
        const resp = await fetch("/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ history }),
        });

        const data = await resp.json();
        if (data.error) {
          statusEl.textContent = "Hata: " + data.error;
        } else {
          const replyText = data.reply || "(Yanıt alınamadı)";
          statusEl.textContent = "";
          replyEl.textContent = replyText;

          // Asistan cevabını da history'ye ekle
          history.push({ role: "assistant", content: replyText });
        }
      } catch (err) {
        console.error(err);
        statusEl.textContent = "Bağlantı hatası. Lütfen daha sonra tekrar deneyin.";
      } finally {
        input.disabled = false;
        input.value = "";
        input.focus();
      }
    });
  })();
</script>


</body>
</html>
